<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="IO" href="io.html" /><link rel="prev" title="Welcome to buildingdataâ€™s documentation!" href="index.html" />

    <!-- Generated with Sphinx 7.1.2 and Furo 2023.07.26 -->
        <title>Usage - buildingdata 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=362ab14a" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">buildingdata 0.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">buildingdata 0.1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Usage</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="io.html">IO</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of IO</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="io/converted.html">Converted IO</a></li>
<li class="toctree-l2"><a class="reference internal" href="io/diagnostics.html">Diagnostics IO</a></li>
<li class="toctree-l2"><a class="reference internal" href="io/extracted.html">Extracted IO</a></li>
<li class="toctree-l2"><a class="reference internal" href="io/ids.html">Ids IO</a></li>
<li class="toctree-l2"><a class="reference internal" href="io/merged.html">Merged IO</a></li>
<li class="toctree-l2"><a class="reference internal" href="io/ppt.html">PPT IO</a></li>
<li class="toctree-l2"><a class="reference internal" href="io/selection.html">Selection IO</a></li>
<li class="toctree-l2"><a class="reference internal" href="io/source.html">Source IO</a></li>
<li class="toctree-l2"><a class="reference internal" href="io/utils.html">Utility functions for IO module</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="identification.html">Identification</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Identification</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="identification/addresses.html">Address Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="identification/identification.html">Identification Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="identification/utils.html">Utility functions for identification module</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="extractor.html">Extractor</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Extractor</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="extractor/bdnb.html">BDNB extractor</a></li>
<li class="toctree-l2"><a class="reference internal" href="extractor/bdtopo.html">BDTOPO extractor</a></li>
<li class="toctree-l2"><a class="reference internal" href="extractor/ademe.html">ADEME extractor</a></li>
<li class="toctree-l2"><a class="reference internal" href="extractor/utils.html">Utility functions for extractor module</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="convert.html">Convert data</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Convert data</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="convert/bdnb.html">Convert BDNB data</a></li>
<li class="toctree-l2"><a class="reference internal" href="convert/bdtopo.html">Convert BDTOPO data</a></li>
<li class="toctree-l2"><a class="reference internal" href="convert/ademe.html">Convert ADEME data</a></li>
<li class="toctree-l2"><a class="reference internal" href="convert/nexity.html">Convert Nexity data</a></li>
<li class="toctree-l2"><a class="reference internal" href="convert/utils.html">Utility functions for convert module</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="merge.html">Merge</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Merge</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="merge/columns.html">Merge data during conversion from source database to personal database organisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="merge/database.html">Merge data from two databases module</a></li>
<li class="toctree-l2"><a class="reference internal" href="merge/merge.html">Merge data Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="merge/utils.html">Utility functions for merge module</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="slides.html">Slides Generator</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Slides Generator</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="slides/picture_extractor.html">Picture Extractor module</a></li>
<li class="toctree-l2"><a class="reference internal" href="slides/generator.html">Slide Generation module</a></li>
<li class="toctree-l2"><a class="reference internal" href="slides/PresentationChurn.html">Class PresentationChurn</a></li>
<li class="toctree-l2"><a class="reference internal" href="slides/utils.html">Utility functions for slides</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="maps.html">Maps API</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Maps API</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="maps/maps.html">Maps API module</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Permalink to this heading">#</a></h1>
<section id="installation">
<span id="id1"></span><h2>Installation<a class="headerlink" href="#installation" title="Permalink to this heading">#</a></h2>
<p>To use buildingdata, first install it by cloning the GitLab repository:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git clone https://git.sia-partners.com/john.levy/renovation-batiment</span>
</pre></div>
</div>
<p>The proposed method to set-up the coding environment is to use anaconda. For this purpose in the root folder
run:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">conda env create -f conda_env.yml</span>
</pre></div>
</div>
<p>Activate the environment that has been created:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">conda activate buildingdata</span>
</pre></div>
</div>
</section>
<section id="introduction-to-buildingdata">
<h2>Introduction to buildingdata<a class="headerlink" href="#introduction-to-buildingdata" title="Permalink to this heading">#</a></h2>
<p>Buildingdata is aimed to be a self-contained package that extracts selected data from the
BDNB and other French open-data source.
This page guides you through the basic usage of the package.</p>
<ul class="simple">
<li><p>First, make sure you have downloaded the relevant BDNB tables in csv format and stored them in the data/source/bdnb folder.</p></li>
</ul>
<img alt="_images/dir.png" src="_images/dir.png" />
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>The folder organisation displayed above is crucial to the good execution of the package. When the package is first downloaded, it will not contain any data files except for the
<cite>data_selection.xlsx</cite> and some other utility files. Please DO NOT change the structure of the subdirectories of the tree presented above, except if you wish to modify the code accordingly.</p>
</div>
<p>If for some reason you have lost the structure of the data directory and wish to retrieve it as it should be, a folder to be downloaded can be found <a class="reference external" href="https://drive.google.com/drive/u/2/folders/1ulJzBPYCmypRsZS-78HCkBm0cvfr0enS">here</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Be careful when trying to extract data for new addresses. Indeed, the BDTOPO and ADEME databases are organized by French departement number. Only relevant departements folders have been downloaded, so if you wish to study addresses from other departements than
the ones that have been treated before you will need to download the corresponding data from the sources websites. Simply add the obtained folders in the data/source/&lt;data_base_name&gt;/ directory.</p>
</div>
<ul class="simple">
<li><p>Second, complete the data_selection excel spreadsheet. This file is the backbone of the package. It is used to select the columns to be extracted as well as to create a new, personalised, database structure following complete data extraction.
An example is shown below. The file is already created when you download the package with some example columns that can be extracted.</p></li>
</ul>
<img alt="_images/spreadsheet.png" src="_images/spreadsheet.png" />
<ul class="simple">
<li><p>Third, save a csv file containing the perimeter of addresses you wish to study. Please make sure that the addresses are present in the BDNB otherwise the extraction will not work.
Also note that the names of the colones are hard_coded in the function loading addresses, called <cite>load_addresses</cite> and located in the identification/addresses.py file. If you wish to use a csv with different column names please modify this function accordingly.
The location of the address file is expected to be in the data/source/addresses directory. Modifiy the <cite>PATH_TO_ADDRESSES</cite> variable located in the <cite>__init__.py</cite> file
of the root directory to match the name of your csv file.</p></li>
<li><p>Fourth, set-up the google maps API key located in the <cite>__init__.py</cite> file of the root directory to your google street view API key.</p></li>
<li><p>Once this is completed, run the <cite>main</cite> function of the <cite>main.py</cite> file of the package this can be done with the following code run from a jupyter notebook for example:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">buildingdata.main</span> <span class="kn">import</span> <span class="n">main</span>
<span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>This function will follow the pipeline detailed below:</p>
<img alt="_images/flowchart.png" src="_images/flowchart.png" />
<p>The results obtained from running the package can be seperated into three classes.</p>
<ol class="arabic simple">
<li><p>The extracted data</p></li>
</ol>
<p>To work with the extracted data a <cite>get_columns</cite> function is provided. It allows you to extract only some
of the columns retrieved from the open-data. The get columns function takes as argument a list of column names
similar to the one that have been specified in the data_selection spreadsheet and the name of the file where you
wish to store those columns. It is written in the main file of the package and can be used with the following import.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">buildingdata.main</span> <span class="kn">import</span> <span class="n">get_columns</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function assumes that the code has been run in full and that the extracted data is located in the data/merged directory.
If it is not the case the function will not be able to load the file containing the extracted data, running the <cite>main</cite> function of the package again should solve the problem.</p>
</div>
<ol class="arabic simple" start="2">
<li><p>The data volume summary</p></li>
</ol>
<p>A summary of the data volume is automatically generated when running the extraction of the columns specified in data_selection stored in the data/diagnostics directory.
Data volume is computed before and after merging the columns with other open-data sources. The summary displays the data volume obtained after
combining all possible sources, as well as the volume of data present in each source sperately.</p>
<ol class="arabic simple" start="3">
<li><p>The generated slides</p></li>
</ol>
<p>A PowerPoint presentation is automatically generated when running the extraction of the columns specified in data_selection.
A slide displaying the data according to the organisation specified in data_selection is automatically created for each address of the perimeter.
Satellite images are obtained from the SolarBot presentation that must be placed in the data/ppt/sources. If you wish to use other images, add them to the
data/ppt/images directory.</p>
<p>Because the queries to the google maps API are quite time consumming, the metadata (api status &amp; query link to the image) are stored in the source/maps folder. Similarly, the streetview images are stored in the data/ppt/images/sw folder
when first queried, so that they can be re-used in order to avoid paying multiple times for the same image.</p>
<p>Therefore, an integration of street view images in the slides is also possible but is not executed by default. To execute it run the <cite>generate_slides</cite> with the street_view argument set to <cite>True</cite>.
This will first launch a request to the google maps API to retrieve the images associated to the links stored in the database if needed, and generate slides containing both the street view and staellite images.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="io.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">IO</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Home</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, John Levy
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Usage</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#introduction-to-buildingdata">Introduction to buildingdata</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=e031e9a9"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="_static/scripts/furo.js?v=32e29ea5"></script>
    </body>
</html>